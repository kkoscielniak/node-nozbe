import axios from"axios";import qs from"querystring";function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var config=createCommonjsModule(function(t,e){const r="https://api.nozbe.com:3000";t.exports={REGISTER_APP:`${r}/oauth/secret/create`,OAUTH_CLIENT_DATA:`${r}/oauth/secret/data`,LOGIN:`${r}/login`,LIST:`${r}/list`,TASK:`${r}/task`,COMMENT:`${r}/task/comment`}}),config_1=config.REGISTER_APP,config_2=config.OAUTH_CLIENT_DATA,config_3=config.LOGIN,config_4=config.LIST,config_5=config.TASK,config_6=config.COMMENT,registerApp=async(t,e,r)=>{try{return(await axios({method:"POST",url:config.REGISTER_APP,data:qs.stringify({email:t,password:e,redirect_uri:r})})).data}catch(t){return t.response.data}},getOAuthClientData=async(t,e)=>{try{const r={email:t,password:e};return(await axios.get(config.OAUTH_CLIENT_DATA,{params:r})).data}catch(t){return t.response.data}},getOAuthLoginURL=t=>{if(!t)throw new Error("No clientId provided");return`${config.LOGIN}/?client_id=${t}`},updateOAuthRedirectUri=async(t,e,r)=>{try{return(await axios({method:"PUT",url:`${config.OAUTH_CLIENT_DATA}?client_id=${t}&secret_token=${e}`,data:qs.stringify({redirect_uri:r})})).data}catch(t){return t.response.data}},oauth={registerApp:registerApp,getOAuthClientData:getOAuthClientData,getOAuthLoginURL:getOAuthLoginURL,updateOAuthRedirectUri:updateOAuthRedirectUri},getListOfTasks=async(t,e)=>{try{const r={client_id:t,type:"task"};return(await axios.get(config.LIST,{params:r,headers:{Authorization:e}})).data}catch(t){return t.response.data}},addTask=async(t,e,r)=>{const{name:a,projectId:s,completed:o,contexts:i,dateTime:c,next:n,user:d,recur:g,time:u}=r;try{return(await axios({method:"POST",url:config.TASK,headers:{Authorization:e},data:qs.stringify({client_id:t,name:a,project_id:s||!1,completed:o||!1,con_list:i||!1,datetime:c||!1,next:n||!1,re_user:d||!1,recur:g||0,time:u||0,comment_unread:!1})})).data}catch(t){return t.response.data}},task={getListOfTasks:getListOfTasks,addTask:addTask},addComment=async(t,e,r)=>{const{taskId:a,type:s,body:o}=r;try{return(await axios({method:"POST",url:config.COMMENT,headers:{Authorization:e},data:qs.stringify({client_id:t,task_id:a,type:s||"markdown",body:o})})).data}catch(t){return t.response.data}},comment={addComment:addComment};const sortComparator=(t,e)=>t.name<e.name?-1:t.name>e.name?1:0;var getProjects=async(t,e,{sort:r})=>{try{const a={client_id:t,type:"project"},s=await axios.get(config.LIST,{params:a,headers:{Authorization:e}}),{data:o}=s;return r?[o[0],...o.slice(1).sort(sortComparator)]:o}catch(t){return t.response.data}},project={getProjects:getProjects},src=createCommonjsModule(function(t,e){e.registerApp=t.exports.registerApp=oauth.registerApp,e.getOAuthClientData=t.exports.getOAuthClientData=oauth.getOAuthClientData,e.getOAuthLoginURL=t.exports.getOAuthLoginURL=oauth.getOAuthLoginURL,e.updateOAuthRedirectUri=t.exports.updateOAuthRedirectUri=oauth.updateOAuthRedirectUri,e.getListOfTasks=t.exports.getListOfTasks=task.getListOfTasks,e.addTask=t.exports.addTask=task.addTask,e.addComment=t.exports.addComment=comment.addComment,e.getProjects=t.exports.getProjects=project.getProjects}),src_1=src.registerApp,src_2=src.getOAuthClientData,src_3=src.getOAuthLoginURL,src_4=src.updateOAuthRedirectUri,src_5=src.getListOfTasks,src_6=src.addTask,src_7=src.addComment,src_8=src.getProjects;export default src;export{src_1 as registerApp,src_2 as getOAuthClientData,src_3 as getOAuthLoginURL,src_4 as updateOAuthRedirectUri,src_5 as getListOfTasks,src_6 as addTask,src_7 as addComment,src_8 as getProjects};
//# sourceMappingURL=node-nozbe.mjs.map
