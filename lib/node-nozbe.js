!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios"),require("querystring")):"function"==typeof define&&define.amd?define(["exports","axios","querystring"],e):e(t["all-log"]={},t.axios,t.qs)}(this,function(t,e,r){"use strict";function a(t,e){return t(e={exports:{}},e.exports),e.exports}e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r;var s=a(function(t,e){const r="https://api.nozbe.com:3000";t.exports={REGISTER_APP:`${r}/oauth/secret/create`,OAUTH_CLIENT_DATA:`${r}/oauth/secret/data`,LOGIN:`${r}/login`,LIST:`${r}/list`,TASK:`${r}/task`,COMMENT:`${r}/task/comment`}}),i=(s.REGISTER_APP,s.OAUTH_CLIENT_DATA,s.LOGIN,s.LIST,s.TASK,s.COMMENT,async(t,a,i)=>{try{return(await e({method:"POST",url:s.REGISTER_APP,data:r.stringify({email:t,password:a,redirect_uri:i})})).data}catch(t){return t.response.data}}),n=async(t,r)=>{try{const a={email:t,password:r};return(await e.get(s.OAUTH_CLIENT_DATA,{params:a})).data}catch(t){return t.response.data}},o=t=>{if(!t)throw new Error("No clientId provided");return`${s.LOGIN}/?client_id=${t}`},d=async(t,a,i)=>{try{return(await e({method:"PUT",url:`${s.OAUTH_CLIENT_DATA}?client_id=${t}&secret_token=${a}`,data:r.stringify({redirect_uri:i})})).data}catch(t){return t.response.data}};const c=async(t,r)=>{try{const a={client_id:t,type:"task"};return(await e.get(s.LIST,{params:a,headers:{Authorization:r}})).data}catch(t){return t.response.data}};var u={getListOfTasks:c,getPriorities:async(t,e)=>{try{return(await c(t,e)).filter(t=>t.next&&!t.completed)}catch(t){return t}},addTask:async(t,a,i)=>{const{name:n,projectId:o,completed:d,contexts:c,dateTime:u,next:p,user:g,recur:T,time:h}=i;try{return(await e({method:"POST",url:s.TASK,headers:{Authorization:a},data:r.stringify({client_id:t,name:n,project_id:o||!1,completed:d||!1,con_list:c||!1,datetime:u||!1,next:p||!1,re_user:g||!1,recur:T||0,time:h||0,comment_unread:!1})})).data}catch(t){return t.response.data}}},p=async(t,a,i)=>{const{taskId:n,type:o,body:d}=i;try{return(await e({method:"POST",url:s.COMMENT,headers:{Authorization:a},data:r.stringify({client_id:t,task_id:n,type:o||"markdown",body:d})})).data}catch(t){return t.response.data}};const g=(t,e)=>t.name<e.name?-1:t.name>e.name?1:0;var T=async(t,r,{sort:a})=>{try{const i={client_id:t,type:"project"},n=await e.get(s.LIST,{params:i,headers:{Authorization:r}}),{data:o}=n;return a?[o[0],...o.slice(1).sort(g)]:o}catch(t){return t.response.data}},h=a(function(t,e){e.registerApp=t.exports.registerApp=i,e.getOAuthClientData=t.exports.getOAuthClientData=n,e.getOAuthLoginURL=t.exports.getOAuthLoginURL=o,e.updateOAuthRedirectUri=t.exports.updateOAuthRedirectUri=d,e.getListOfTasks=t.exports.getListOfTasks=u.getListOfTasks,e.getPriorities=t.exports.getPriorities=u.getPriorities,e.addTask=t.exports.addTask=u.addTask,e.addComment=t.exports.addComment=p,e.getProjects=t.exports.getProjects=T}),m=h.registerApp,A=h.getOAuthClientData,l=h.getOAuthLoginURL,y=h.updateOAuthRedirectUri,O=h.getListOfTasks,f=h.getPriorities,_=h.addTask,L=h.addComment,x=h.getProjects;t.default=h,t.registerApp=m,t.getOAuthClientData=A,t.getOAuthLoginURL=l,t.updateOAuthRedirectUri=y,t.getListOfTasks=O,t.getPriorities=f,t.addTask=_,t.addComment=L,t.getProjects=x,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=node-nozbe.js.map
